

# M1.5 — Representation Spine & Compression Scaffold

## Objective
Lock the **representational spine** of the unified manifold so that all future capabilities (learning, mass, motifs, lenses) become *promotions*, not refactors.

M1.5 proves:
- What kinds of things exist in the manifold (primitives).
- How structure may evolve (compression ladder), **without learning**.
- That representation changes are deterministic, observable, and non-mutating in `OBSERVE` mode.

---

## M1.5.0 Implementation contract (what guides the build)

M1.5 must conform to canonical specs:
- **Foundations v1.1:** knowledge is geometry; learning is curvature; Observation ≠ Learning.
- **Design v1.1:** representation-first, domains as hypotheses, motifs as promotion.
- **Architecture v1.1:** core engine is source of truth; RunModes enforced; artifacts authoritative for replay.
- **Validation framework:** packs are deterministic; gates are computed from artifacts.

**RunMode (M1.5):** All executions run in `OBSERVE`. Any κ mutation or durable state mutation is a bug.

---

## M1.5.1 Scope (explicit inclusions / exclusions)

### Included
- Primitive Registry (versioned).
- Compression ladder declaration (L0–L4 as states/types).
- Promotion/decay **hooks** (eligibility + logging only).
- Deterministic ingestion of primitives from packs.

### Explicitly excluded
- Plasticity / Δκ updates.
- Motif commits or reuse.
- Consolidation, decay application, or pruning.
- Any RunMode other than `OBSERVE`.

---

## M1.5.2 Core concepts (implementation-level)

### Primitives
- **Definition:** Atomic, versioned semantic units that can participate in traversal.
- **Required fields:** `id`, `type`, `version`, `origin`, `layer`, `provisional`.
- **Rule:** Primitives are addressable geometry; they do not learn.

### Compression ladder
- **States:** L0 (raw), L1 (signals), L2 (concepts), L3 (procedures/motifs), L4 (episodes).
- **Rule:** States are declared in code; transitions are *not executed* in M1.5.

### Promotion/decay hooks
- **Purpose:** Observe eligibility signals (frequency, co-activation, valence markers).
- **Rule:** Hooks may log candidates but must not mutate durable geometry.

---

## M1.5.3 Engine interfaces (stable shapes)

### Primitive Registry
- `register_primitive(primitive) -> primitive_id`
- `get_primitive(primitive_id)`
- Deterministic ordering and lookup required.

### Compression API (scaffold)
- `observe_promotion_candidate(trace, signals) -> None`
- `observe_decay_candidate(primitive_id, signals) -> None`

**Note:** These functions must only emit artifacts/logs in M1.5.

---

## M1.5.4 Artifacts (required)

Per interaction/run, emit:
- `primitives.json` — registered primitives and metadata.
- `compression_ladder.json` — declared ladder states and invariants.
- `promotion_candidates.json` — observed promotion eligibility (no commits).
- Standard artifacts: `interaction.json`, `trace.json`, `metrics.json`.

Artifacts must be sufficient to prove:
- No κ mutation occurred.
- Representation is deterministic across runs.

---

## M1.5.5 Validation harness updates

### Pack additions
- Extend or create `packs/toy_m1_5/` with:
  - `seed_graph.json` including primitives with explicit `layer`.
  - `interactions.jsonl` that exercises traversal over multiple primitives.
  - `assertions.json` requiring representation determinism.

### Assertions (minimum)
- `no_kappa_mutation == true`
- `primitive_registry_deterministic == true`
- `compression_ladder_declared == true`
- `promotion_candidates_logged == true` (may be empty, but file exists)

---

## M1.5.6 Tests (must ship)

Unit tests:
- `test_primitive_registry_deterministic()`
- `test_compression_ladder_states_declared()`
- `test_promotion_hooks_observational_only()`

Integration test:
- `mm validate --pack packs/toy_m1_5 ...` passes M1.5 assertions with Gate A still satisfied.

---

## M1.5 “Done” definition

✅ A new developer can run:
```bash
python -m cli.main validate --pack packs/toy_m1_5 --profile dev --seed 1 --state state.sqlite
```

…and observe:
- No κ or durable state mutation.
- Deterministic primitive registry and ladder artifacts.
- Logged promotion candidates without commits.
- Passing M1.5 assertions; Gate A remains green.

---

## Notes on forward compatibility

- Motifs (M5) must be implemented as L3 promotions using this scaffold.
- Consolidation (M6) may later apply decay/promotion, but must reuse these hooks.
- Any change to primitive fields or ladder states requires revisiting this milestone.

---

> **Principle:** Representation must be correct *before* learning is allowed.

---